<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Tab - Random Quote</title>
    <link rel="stylesheet" href="css/newtab.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;500&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Hover trigger area for settings -->
    <div class="settings-trigger"></div>

    <div class="settings-button" id="settingsBtn" title="Settings (hover top-right corner)">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
        </svg>
    </div>

    <div class="container">
        <div class="quote-container" id="quoteContainer">
            <blockquote class="quote" id="quoteText">
                Loading your daily inspiration...
            </blockquote>
            <cite class="author" id="quoteAuthor"></cite>
        </div>

    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal" style="display: none;">
        <div class="modal-container">
            <button id="closeModalBtn" class="close-modal-button" title="Close Settings">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>

            <div class="settings-layout">
                <!-- Left Sidebar -->
                <div class="settings-sidebar">
                    <div class="sidebar-header">
                        <h1>Settings</h1>
                    </div>
                    <nav class="settings-nav">
                        <button class="nav-item active" data-panel="general">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                            </svg>
                            <span>General</span>
                        </button>
                        <button class="nav-item" data-panel="appearance">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="5"></circle>
                                <line x1="12" y1="1" x2="12" y2="3"></line>
                                <line x1="12" y1="21" x2="12" y2="23"></line>
                                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                <line x1="1" y1="12" x2="3" y2="12"></line>
                                <line x1="21" y1="12" x2="23" y2="12"></line>
                                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                            </svg>
                            <span>Appearance</span>
                        </button>
                        <button class="nav-item" data-panel="custom">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                            </svg>
                            <span>Custom Quotes</span>
                        </button>
                        <button class="nav-item" data-panel="integrations">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                                <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                                <line x1="12" y1="22.08" x2="12" y2="12"></line>
                            </svg>
                            <span>Integrations</span>
                        </button>
                    </nav>
                </div>

                <!-- Right Content Panel -->
                <div class="settings-content">
                    <!-- General Panel -->
                    <div class="content-panel active" id="general-panel">
                        <h2>General</h2>
                        <p class="panel-description">Basic extension settings</p>
                        <div class="setting-group">
                            <label class="switch-label">
                                <input type="checkbox" id="useStock" class="switch-input">
                                <span class="switch-slider"></span>
                                Use built-in quote collection (100+ quotes)
                            </label>
                        </div>

                        <!-- About Section -->
                        <div class="setting-group about-section">
                            <h3 class="setting-subtitle">About</h3>
                            <div class="about-content">
                                <p><strong>New Tab Random Quote</strong></p>
                                <p>A minimalist Chrome extension that transforms your new tab page into a source of daily inspiration with carefully curated quotes.</p>

                                <div class="about-details">
                                    <p><strong>Version:</strong> <span id="extensionVersion">4.1.0</span></p>
                                    <p><strong>Designed by:</strong> Gabriel Krieshok</p>
                                </div>

                                <p class="about-description">
                                    Built with modern web standards (Manifest V3, ES Modules) and a focus on simplicity, privacy, and performance. Features 100+ curated quotes, custom quote management, AirTable integration, CSV import, and automatic theme detection.
                                </p>

                                <p class="about-links">
                                    <a href="https://github.com/gabrielkrieshok/new-tab-random-quote" target="_blank" class="about-link">GitHub</a>
                                    <span class="link-separator">•</span>
                                    <a href="https://github.com/gabrielkrieshok/new-tab-random-quote/issues" target="_blank" class="about-link">Report Issue</a>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Appearance Panel -->
                    <div class="content-panel" id="appearance-panel">
                        <h2>Appearance</h2>
                        <p class="panel-description">Customize how quotes are displayed</p>

                        <div class="setting-group">
                            <h3 class="setting-subtitle">Theme</h3>
                            <div class="theme-selector">
                                <div class="theme-option">
                                    <input type="radio" id="systemTheme" name="theme" value="system" class="theme-radio">
                                    <label for="systemTheme" class="theme-label">
                                        <div class="theme-preview system-preview"></div>
                                        <span>System</span>
                                    </label>
                                </div>

                                <div class="theme-option">
                                    <input type="radio" id="lightTheme" name="theme" value="light" class="theme-radio">
                                    <label for="lightTheme" class="theme-label">
                                        <div class="theme-preview light-preview"></div>
                                        <span>Light</span>
                                    </label>
                                </div>

                                <div class="theme-option">
                                    <input type="radio" id="darkTheme" name="theme" value="dark" class="theme-radio">
                                    <label for="darkTheme" class="theme-label">
                                        <div class="theme-preview dark-preview"></div>
                                        <span>Dark</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="setting-group">
                            <h3 class="setting-subtitle">Color Scheme</h3>
                            <p class="setting-description">Choose a color palette for your theme</p>
                            <div class="color-scheme-selector">
                                <label class="color-scheme-option">
                                    <input type="radio" name="colorScheme" value="default" id="schemeDefault">
                                    <div class="scheme-preview">
                                        <span class="scheme-swatch" style="background: #f8fafc"></span>
                                        <span class="scheme-swatch" style="background: #0f172a"></span>
                                    </div>
                                    <span class="scheme-name">Default</span>
                                </label>
                                <label class="color-scheme-option">
                                    <input type="radio" name="colorScheme" value="warm" id="schemeWarm">
                                    <div class="scheme-preview">
                                        <span class="scheme-swatch" style="background: #faf6f1"></span>
                                        <span class="scheme-swatch" style="background: #2c1f14"></span>
                                    </div>
                                    <span class="scheme-name">Warm</span>
                                </label>
                                <label class="color-scheme-option">
                                    <input type="radio" name="colorScheme" value="ocean" id="schemeOcean">
                                    <div class="scheme-preview">
                                        <span class="scheme-swatch" style="background: #f0f7fa"></span>
                                        <span class="scheme-swatch" style="background: #0c2233"></span>
                                    </div>
                                    <span class="scheme-name">Ocean</span>
                                </label>
                                <label class="color-scheme-option">
                                    <input type="radio" name="colorScheme" value="forest" id="schemeForest">
                                    <div class="scheme-preview">
                                        <span class="scheme-swatch" style="background: #f2f7f0"></span>
                                        <span class="scheme-swatch" style="background: #142214"></span>
                                    </div>
                                    <span class="scheme-name">Forest</span>
                                </label>
                                <label class="color-scheme-option">
                                    <input type="radio" name="colorScheme" value="rose" id="schemeRose">
                                    <div class="scheme-preview">
                                        <span class="scheme-swatch" style="background: #faf0f2"></span>
                                        <span class="scheme-swatch" style="background: #2d0f18"></span>
                                    </div>
                                    <span class="scheme-name">Rose</span>
                                </label>
                                <label class="color-scheme-option">
                                    <input type="radio" name="colorScheme" value="custom" id="schemeCustom">
                                    <div class="scheme-preview">
                                        <span class="scheme-swatch custom-swatch-light" id="customSwatchLight"></span>
                                        <span class="scheme-swatch custom-swatch-dark" id="customSwatchDark"></span>
                                    </div>
                                    <span class="scheme-name">Custom</span>
                                </label>
                            </div>

                            <div class="custom-colors" id="customColorsSection" style="display: none">
                                <div class="custom-colors-row">
                                    <h4 class="custom-colors-heading">Light Mode</h4>
                                    <div class="color-picker-group">
                                        <label for="customLightBg">Background</label>
                                        <input type="color" id="customLightBg" value="#f8fafc">
                                    </div>
                                    <div class="color-picker-group">
                                        <label for="customLightText">Text</label>
                                        <input type="color" id="customLightText" value="#0f172a">
                                    </div>
                                </div>
                                <div class="custom-colors-row">
                                    <h4 class="custom-colors-heading">Dark Mode</h4>
                                    <div class="color-picker-group">
                                        <label for="customDarkBg">Background</label>
                                        <input type="color" id="customDarkBg" value="#0f172a">
                                    </div>
                                    <div class="color-picker-group">
                                        <label for="customDarkText">Text</label>
                                        <input type="color" id="customDarkText" value="#f1f5f9">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="setting-group" id="darkModeStyleGroup">
                            <h3 class="setting-subtitle">Dark Mode Style</h3>
                            <p class="setting-description">Choose the background color for dark mode</p>
                            <div class="size-selector">
                                <label class="size-option">
                                    <input type="radio" name="darkModeStyle" value="blue-gray" id="blueGrayStyle">
                                    <span class="size-label">Blue-Gray</span>
                                </label>
                                <label class="size-option">
                                    <input type="radio" name="darkModeStyle" value="pure-black" id="pureBlackStyle">
                                    <span class="size-label">Pure Black</span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-group">
                            <h3 class="setting-subtitle">Typography</h3>

                            <!-- Typography Preview -->
                            <div class="typography-preview" id="typographyPreview">
                                <div class="preview-label">Preview</div>
                                <div class="preview-quote" id="previewQuote">The only way to do great work is to love what you do.</div>
                                <div class="preview-author">— Steve Jobs</div>
                            </div>

                            <div class="form-group">
                                <label for="quoteFontFamily">Quote Font</label>
                                <select id="quoteFontFamily" class="form-select">
                                    <option value="'EB Garamond', Georgia, serif">EB Garamond (Serif)</option>
                                    <option value="Georgia, serif">Georgia (Serif)</option>
                                    <option value="'Merriweather', Georgia, serif">Merriweather (Serif)</option>
                                    <option value="'Inter', -apple-system, sans-serif">Inter (Sans-serif)</option>
                                    <option value="-apple-system, BlinkMacSystemFont, sans-serif">System Default</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="quoteFontSize">Quote Size</label>
                                <div class="size-selector">
                                    <label class="size-option">
                                        <input type="radio" name="fontSize" value="small" id="fontSizeSmall">
                                        <span>Small</span>
                                    </label>
                                    <label class="size-option">
                                        <input type="radio" name="fontSize" value="medium" id="fontSizeMedium" checked>
                                        <span>Medium</span>
                                    </label>
                                    <label class="size-option">
                                        <input type="radio" name="fontSize" value="large" id="fontSizeLarge">
                                        <span>Large</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Custom Quotes Panel -->
                    <div class="content-panel" id="custom-panel">
                        <h2>Custom Quotes</h2>
                        <p class="panel-description">Add and manage your personal quote collection</p>
                        <div class="quote-form">
                            <div class="form-group">
                                <textarea id="newQuoteText" placeholder="Enter your favorite quote here..." rows="3"></textarea>
                            </div>

                            <div class="form-group">
                                <input type="text" id="newQuoteAuthor" placeholder="Quote author or source">
                            </div>

                            <button id="addQuoteBtn" class="btn btn-primary">Add Quote</button>
                        </div>

                        <div class="quote-stats">
                            <span id="quoteCount">0 custom quotes</span>
                            <div class="quote-actions">
                                <button id="exportBtn" class="btn btn-secondary btn-sm">Export</button>
                                <button id="clearAllBtn" class="btn btn-danger btn-sm">Clear All</button>
                            </div>
                        </div>

                        <div class="quote-list" id="quoteList"></div>
                    </div>

                    <!-- Integrations Panel -->
                    <div class="content-panel" id="integrations-panel">
                        <h2>Integrations</h2>
                        <p class="panel-description">Import quotes from external sources</p>

                        <!-- CSV Import Section -->
                        <div class="setting-group">
                            <h3 class="setting-subtitle">CSV Import</h3>
                            <p class="setting-description">Import quotes from a CSV file with columns for Quote and Author/Source.</p>

                            <div class="csv-instructions">
                                <p><strong>CSV Format:</strong></p>
                                <ul>
                                    <li>First row must be headers: <code>Quote,Author</code> or <code>Quote,Source</code></li>
                                    <li>Each subsequent row contains one quote and its author</li>
                                    <li>Quotes with commas should be wrapped in double quotes</li>
                                    <li>Maximum file size: 1MB</li>
                                    <li>Chrome storage limit: ~8KB per quote, ~100KB total for custom quotes</li>
                                </ul>
                                <p class="setting-hint">Example: <code>"The only way out is through.",Robert Frost</code></p>
                            </div>

                            <div class="csv-import-controls">
                                <input type="file" id="csvFileInput" accept=".csv" style="display: none;">
                                <button id="selectCsvBtn" class="btn btn-secondary">Select CSV File</button>
                                <button id="importCsvBtn" class="btn btn-primary" disabled>Import Quotes</button>
                                <span id="csvFileName" class="file-name"></span>
                            </div>
                        </div>

                        <!-- AirTable Section -->
                        <div class="setting-group">
                            <h3 class="setting-subtitle">AirTable Integration</h3>
                            <p class="setting-description">
                                Connect your personal AirTable database to manage quotes from a centralized location.
                                Perfect for maintaining large quote collections across multiple devices. Your AirTable base
                                can serve as a master quote library that automatically syncs to the extension.
                            </p>
                            <label class="switch-label">
                                <input type="checkbox" id="airtableEnabled" class="switch-input">
                                <span class="switch-slider"></span>
                                Enable AirTable integration
                            </label>
                        </div>

                        <div class="airtable-config" id="airtableConfig" style="display: none;">
                            <div class="form-group">
                                <label for="airtableToken">Personal Access Token</label>
                                <input type="password" id="airtableToken" placeholder="Enter your token">
                                <p class="field-help">Get from <a href="https://airtable.com/create/tokens" target="_blank">AirTable</a></p>
                            </div>

                            <div class="form-group">
                                <label for="airtableBaseId">Base ID</label>
                                <input type="text" id="airtableBaseId" placeholder="app1234567890abcd">
                            </div>

                            <div class="form-group">
                                <label for="airtableTableName">Table Name</label>
                                <input type="text" id="airtableTableName" placeholder="Quotes">
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="airtableQuoteField">Quote Field</label>
                                    <input type="text" id="airtableQuoteField" placeholder="Quote" value="Quote">
                                </div>

                                <div class="form-group">
                                    <label for="airtableAuthorField">Author Field</label>
                                    <input type="text" id="airtableAuthorField" placeholder="Author" value="Author">
                                </div>
                            </div>

                            <div class="airtable-actions">
                                <button id="testConnectionBtn" class="btn btn-secondary">Test Connection</button>
                                <button id="syncNowBtn" class="btn btn-primary">Sync Now</button>
                            </div>

                            <div class="setting-group">
                                <label class="switch-label">
                                    <input type="checkbox" id="airtableAutoSync" class="switch-input">
                                    <span class="switch-slider"></span>
                                    Enable automatic sync
                                </label>
                            </div>

                            <div class="form-group" id="syncFrequencyGroup" style="display: none;">
                                <label for="syncFrequency">Sync Frequency</label>
                                <select id="syncFrequency" class="form-select">
                                    <option value="hourly">Every Hour</option>
                                    <option value="daily" selected>Daily</option>
                                    <option value="weekly">Weekly</option>
                                </select>
                            </div>

                            <div class="sync-status" id="syncStatus">
                                <div class="status-row">
                                    <span class="status-label">Last Sync:</span>
                                    <span id="lastSyncTime">Never</span>
                                </div>
                                <div class="status-row">
                                    <span class="status-label">Quotes Synced:</span>
                                    <span id="syncedQuoteCount">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script type="module" src="js/newtab.js"></script>
</body>
</html>
